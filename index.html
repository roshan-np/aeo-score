<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEO Scanner</title>
    <meta name="title" content="AEO Scanner - Visibility Score">
    <meta name="description" content="Check your brand visibility for the AI era - from Google to AI models like ChatGPT, Gemini and Claude.">    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="AEO Scanner - Visibility Score">
    <meta property="og:description" content="Check your brand visibility for the AI era - from Google to AI models like ChatGPT, Gemini and Claude.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1677442136019-21780ecad995">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f9fafb; color: #111827; }
        .loader { border-top-color: #4f46e5; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center py-12 px-4">

    <div class="w-full max-w-xl">
        <!-- Brand Header -->
        <div class="text-center mb-8">
            <span class="bg-red-600 text-white px-3 py-1 rounded text-[10px] font-bold uppercase tracking-widest inline-block mb-4 shadow-sm">Powered by WooBrand</span>
            <h1 class="text-4xl font-black text-slate-900 tracking-tighter uppercase">AEO <span class="text-red-600 font-normal italic">Scanner</span></h1>
        </div>

        <div class="bg-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl border border-slate-200">
            
            <!-- FORM SECTION -->
            <div id="scan-form" class="space-y-4">
                <div>
                    <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1">Work Email</label>
                    <input type="email" id="email" placeholder="you@company.com" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-3.5 focus:bg-white focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>
                <div>
                    <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1">Brand URL</label>
                    <input type="text" id="userUrl" placeholder="cloudflare.com" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-3.5 focus:bg-white focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>
                <div>
                    
<label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1">Industry / Niche</label>
<div class="relative">
    <select id="niche" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-3.5 focus:bg-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all appearance-none cursor-pointer text-slate-700">
        <option value="General">General / Other</option>
        
        <optgroup label="Business & Tech">
            <option value="SaaS">SaaS / Software</option>
            <option value="Tech">Technology</option>
            <option value="Agency">Agency / Marketing</option>
            <option value="Consulting">Consulting</option>
            <option value="B2B">B2B Services</option>
            <option value="Finance">Finance / Fintech</option>
        </optgroup>

        <optgroup label="Consumer & Lifestyle">
            <option value="Ecommerce">Ecommerce / Retail</option>
            <option value="Health">Health & Wellness</option>
            <option value="Travel">Travel & Hospitality</option>
            <option value="Real Estate">Real Estate</option>
            <option value="Education">Education / Courses</option>
            <option value="Legal">Legal Services</option>
        </optgroup>

        <optgroup label="Media & Entertainment">
            <option value="News">News / Media</option>
            <option value="Entertainment">Entertainment / Video</option>
        </optgroup>
        
        <optgroup label="Local Services">
            <option value="Local">Local Business</option>
            <option value="Restaurant">Food & Beverage</option>
        </optgroup>
    </select>
    
    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-5 text-slate-500">
        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
    </div>
</div>
                    
                </div>
                <div>
                    <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1">Competitor <span class="text-slate-300 font-normal italic">(Optional)</span></label>
                    <input type="text" id="competitor" placeholder="competitor.com" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-3.5 focus:bg-white focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>
                <button onclick="runAudit()" class="w-full bg-slate-900 hover:bg-red-600 text-white font-bold py-5 rounded-2xl transition-all shadow-lg uppercase tracking-widest text-xs mt-2">
                    Start AEO Audit
                </button>
            </div>

            <!-- LOADING SECTION -->
            <div id="loading" class="hidden py-16 text-center">
                <div class="loader rounded-full border-4 border-slate-100 border-t-4 h-12 w-12 mx-auto mb-6"></div>
                <p class="text-slate-900 font-bold">Scanning Answer Engine Knowledge Graph...</p>
            </div>

            <!-- RESULT SECTION -->
            <div id="results" class="hidden fade-in">
                <div class="text-center mb-8">
                    <span id="report-title" class="text-slate-400 text-[10px] font-black uppercase tracking-[0.3em]">AEO Visibility Score</span>
                    <div id="score-text" class="text-9xl font-black text-slate-900 leading-none my-4 tracking-tighter">0</div>
                    <div id="rating-label" class="inline-block px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm"></div>
                </div>

                <div class="bg-slate-50 p-6 rounded-[2rem] border border-slate-100 mb-8 text-center">
                    <h4 class="text-[10px] font-black text-red-600 uppercase mb-2 tracking-widest">Your Brand Visibility for AEO</h4>
                    <p id="outlook" class="text-slate-600 text-sm leading-relaxed mb-6 font-medium"></p>
                    
                    <!-- REQUEST DEEP SCAN BUTTON -->
                    <a href="mailto:hello@woobrand.com?subject=AEO Deep Scan Request" class="block w-full bg-red-600 text-white py-4 rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-red-700 transition shadow-lg shadow-red-100">
                        Request Deep Scan Audit
                    </a>
                </div>

                <div class="flex gap-3 mb-6">
                    <button onclick="copyShareLink()" class="flex-1 border-2 border-slate-200 py-4 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-slate-50 transition">
                        <i class="fa-solid fa-link mr-2 text-slate-400"></i> Copy Report Link
                    </button>
                </div>

                <button onclick="resetScanner()" class="block w-full text-center text-slate-400 text-[10px] font-black uppercase tracking-widest hover:text-red-600 transition">‚Üê New Scan</button>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzcWGsBQxTGuHxnNnEhVTvEOqkbVrXjpvvrf9xIw3zu4T6YsGX5J_NsM1mbVJl4nCqC/exec';

        // Load shared report if present in URL
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('report')) {
                try {
                    const data = JSON.parse(atob(urlParams.get('report')));
                    showResults(data.url, data.score, data.niche);
                } catch (e) { console.error("Invalid link"); }
            }
        };

        async function runAudit() {
    const email = document.getElementById('email').value;
    const url = document.getElementById('userUrl').value;
    const niche = document.getElementById('niche').value;
    const comp = document.getElementById('competitor').value; // Ensure this ID exists in your HTML

    if(!email || !url || !niche) return alert("Required fields missing.");

    document.getElementById('scan-form').classList.add('hidden');
    document.getElementById('loading').classList.remove('hidden');

    try {
        // Send all 4 parameters to the script
        const finalUrl = `${SCRIPT_URL}?email=${encodeURIComponent(email)}&url=${encodeURIComponent(url)}&niche=${encodeURIComponent(niche)}&competitor=${encodeURIComponent(comp)}`;
        
        const response = await fetch(finalUrl);
        const result = await response.json();
        
        if (result.error) throw new Error(result.error);

        // Update URL for sharing
        const shareData = btoa(JSON.stringify({ url: result.url, score: result.score, niche: niche }));
        window.history.pushState({}, '', `?report=${encodeURIComponent(shareData)}`);
        
        showResults(result.url, result.score, niche);
    } catch(e) {
        console.error("Audit Error:", e);
        showResults(url, 30, niche); // Fallback
    }
}

        function showResults(url, score, niche) {
            document.getElementById('scan-form').classList.add('hidden');
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            
            document.getElementById('score-text').innerText = score;
            document.getElementById('report-title').innerText = `Report: ${url}`;
            
            const r = document.getElementById('rating-label');
            let label = "Low Authority";
            let colorClass = "bg-red-100 text-red-600";
            let outlook = `${url} currently lacks the Topical Authority required for Answer Engines to recommend you in the ${niche} space.`;

            if (score >= 85) {
                label = "AEO Authority";
                colorClass = "bg-green-100 text-green-700";
                outlook = `${url} is an established Source of Truth. AI Models likely prioritize your brand as a foundational citation for ${niche}.`;
            } else if (score >= 50) {
                label = "Emerging Presence";
                colorClass = "bg-red-100 text-red-700";
                outlook = `${url} is indexed for ${niche} but lacks the "Entity" status required for top-tier AI recommendations.`;
            }

            r.innerText = label;
            r.className = `inline-block px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm ${colorClass}`;
            document.getElementById('outlook').innerText = outlook;
        }

        function copyShareLink() {
            navigator.clipboard.writeText(window.location.href);
            alert("Report link copied!");
        }

        function resetScanner() {
            window.location.href = window.location.origin + window.location.pathname;
        }
    </script>
</body>
</html>